# Grafana Alerting - Contact Points Provisioning
# These are placeholder contact points - configure secrets via environment variables
#
# REQUIRED CONFIGURATION (set via docker-compose environment variables):
# - SMTP: GF_SMTP_* variables for email notifications
# - Webhook: Update the webhook URL in Grafana UI or use a secret manager
#
# See monitoring/README.md for configuration instructions.

apiVersion: 1

contactPoints:
  # Default contact point for all environments
  - orgId: 1
    name: scanium-default
    receivers:
      # Webhook receiver (placeholder - update URL in UI or via secrets)
      - uid: scanium-webhook
        type: webhook
        settings:
          url: "${SCANIUM_ALERT_WEBHOOK_URL:-http://localhost:8080/alerts}"
          httpMethod: POST
          maxAlerts: 10
        disableResolveMessage: false

  # High priority contact point for production alerts
  - orgId: 1
    name: scanium-high-priority
    receivers:
      # Primary webhook for production
      - uid: scanium-webhook-prod
        type: webhook
        settings:
          url: "${SCANIUM_ALERT_WEBHOOK_URL_PROD:-http://localhost:8080/alerts/prod}"
          httpMethod: POST
          maxAlerts: 5
        disableResolveMessage: false
      # Email fallback (requires SMTP configuration)
      # Uncomment and configure GF_SMTP_* environment variables
      # - uid: scanium-email-prod
      #   type: email
      #   settings:
      #     addresses: "${SCANIUM_ALERT_EMAIL:-alerts@example.com}"
      #     singleEmail: true
      #   disableResolveMessage: false

  # Low priority contact point for dev/staging
  - orgId: 1
    name: scanium-low-priority
    receivers:
      - uid: scanium-webhook-dev
        type: webhook
        settings:
          url: "${SCANIUM_ALERT_WEBHOOK_URL_DEV:-http://localhost:8080/alerts/dev}"
          httpMethod: POST
          maxAlerts: 20
        disableResolveMessage: false
