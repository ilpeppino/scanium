# ======================
# REQUIRED - backend core
# ======================

PUBLIC_BASE_URL=https://your-domain.com

# Database (must match postgres service)
DATABASE_URL=postgresql://scanium:CHANGE_ME@scanium-postgres:5432/scanium

# API auth (generate with: openssl rand -base64 48)
SCANIUM_API_KEYS=generate-strong-random-key-here

# Session secret (generate with: openssl rand -hex 32)
SESSION_SIGNING_SECRET=generate-64-char-hex-string-here

# Google OAuth (Android OAuth Client ID from Google Cloud Console)
GOOGLE_OAUTH_CLIENT_ID=your_android_client_id_here.apps.googleusercontent.com

# Auth session secret (generate with: openssl rand -base64 32)
AUTH_SESSION_SECRET=generate-random-base64-32-bytes-here

# Session expiry (30 days)
AUTH_SESSION_EXPIRY_SECONDS=2592000

# Phase C: Refresh token expiry (90 days)
AUTH_REFRESH_TOKEN_EXPIRY_SECONDS=7776000

# CORS
CORS_ORIGINS=scanium://

# ======================
# Vision & Classifier
# ======================

VISION_PROVIDER=google
SCANIUM_CLASSIFIER_PROVIDER=google

VISION_FEATURE=OBJECT_LOCALIZATION,TEXT_DETECTION,IMAGE_PROPERTIES,LOGO_DETECTION,LABEL_DETECTION
VISION_TIMEOUT_MS=10000
VISION_MAX_RETRIES=2

GOOGLE_APPLICATION_CREDENTIALS=/secrets/vision-sa.json

# Postgres (for docker-compose)
POSTGRES_USER=scanium
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=scanium

# ======================
# Assistant
# ======================

SCANIUM_ASSISTANT_PROVIDER=openai
# Generate separate assistant API keys (openssl rand -base64 48)
SCANIUM_ASSISTANT_API_KEYS=generate-assistant-api-key-here

# OpenAI API key (from platform.openai.com)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Phase B: Per-user rate limiting (authenticated requests only)
ASSIST_USER_RATE_LIMIT_PER_MINUTE=20
# Phase B: Per-user daily quota (authenticated requests only)
ASSIST_USER_DAILY_QUOTA=100

# ======================
# IMPORTANT: Key Rotation Required
# ======================
# If you see this file for the first time after cloning,
# ALL secrets in the example above need to be generated fresh.
#
# Previous keys that may have been committed to git history
# should be considered COMPROMISED and must be rotated:
# - Regenerate all SCANIUM_API_KEYS
# - Regenerate SESSION_SIGNING_SECRET
# - Change POSTGRES_PASSWORD
# - Rotate OPENAI_API_KEY on platform.openai.com
# - Regenerate SCANIUM_ASSISTANT_API_KEYS
