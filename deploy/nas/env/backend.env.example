# =============================================================================
# Scanium Backend - NAS Deployment Environment Variables
# =============================================================================
# INSTRUCTIONS:
# 1. Copy this file: cp backend.env.example backend.env
# 2. Fill in ALL values marked with "CHANGE_ME" or "your_*_here"
# 3. Generate secrets using the commands in comments
# 4. Keep backend.env private (it's gitignored)
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=8080

# Public URL for OAuth callbacks and external references
# If using Cloudflare Tunnel: https://api.yourdomain.com
# If exposing directly on LAN: http://192.168.x.x:8080
PUBLIC_BASE_URL=http://CHANGE_ME_NAS_IP:8080

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Container-to-container connection (use service name from docker-compose)
DATABASE_URL=postgresql://scanium:CHANGE_ME_DB_PASSWORD@scanium-postgres:5432/scanium?sslmode=disable

# Postgres container credentials (must match DATABASE_URL)
POSTGRES_USER=scanium
POSTGRES_PASSWORD=CHANGE_ME_DB_PASSWORD
POSTGRES_DB=scanium

# -----------------------------------------------------------------------------
# API Security
# -----------------------------------------------------------------------------
# Comma-separated API keys for mobile app authentication
# Generate with: openssl rand -hex 32
SCANIUM_API_KEYS=CHANGE_ME_API_KEY_1,CHANGE_ME_API_KEY_2

# Session signing secret for cookies
# Generate with: openssl rand -base64 64
SESSION_SIGNING_SECRET=CHANGE_ME_SESSION_SECRET

# CORS origins (comma-separated, no wildcards)
# Include: scanium:// (app scheme), LAN origins if needed
CORS_ORIGINS=scanium://

# -----------------------------------------------------------------------------
# Classifier (Image Recognition)
# -----------------------------------------------------------------------------
# Provider: mock (no external calls) or google (requires credentials)
SCANIUM_CLASSIFIER_PROVIDER=mock

# Vision API settings (only if using google provider)
VISION_FEATURE=LABEL_DETECTION
VISION_TIMEOUT_MS=10000
VISION_MAX_RETRIES=2

# Rate limits (conservative for NAS)
CLASSIFIER_RATE_LIMIT_PER_MINUTE=30
CLASSIFIER_CONCURRENCY_LIMIT=1
MAX_UPLOAD_BYTES=5242880

# Domain pack
DOMAIN_PACK_ID=home_resale
DOMAIN_PACK_PATH=dist/modules/classifier/domain/home-resale.json
CLASSIFIER_RETAIN_UPLOADS=false
CLASSIFIER_MOCK_SEED=scanium-mock

# Google Vision credentials (only if SCANIUM_CLASSIFIER_PROVIDER=google)
# Mount the service account JSON file and set this path
# GOOGLE_APPLICATION_CREDENTIALS=/secrets/vision-sa.json

# -----------------------------------------------------------------------------
# eBay OAuth Configuration
# -----------------------------------------------------------------------------
# Environment: sandbox (testing) or production (live)
EBAY_ENV=sandbox

# Get credentials from eBay Developer Portal:
# https://developer.ebay.com/my/keys
EBAY_CLIENT_ID=your_ebay_client_id_here
EBAY_CLIENT_SECRET=your_ebay_client_secret_here

# Token encryption key (32+ characters)
# Generate with: openssl rand -base64 32
EBAY_TOKEN_ENCRYPTION_KEY=CHANGE_ME_TO_32_CHAR_SECRET

# OAuth callback path
EBAY_REDIRECT_PATH=/auth/ebay/callback

# eBay API Scopes (space-delimited)
EBAY_SCOPES=https://api.ebay.com/oauth/api_scope https://api.ebay.com/oauth/api_scope/sell.inventory https://api.ebay.com/oauth/api_scope/sell.fulfillment https://api.ebay.com/oauth/api_scope/sell.account

# -----------------------------------------------------------------------------
# AI Assistant (Optional)
# -----------------------------------------------------------------------------
# Provider: mock (free, no API calls), openai, or disabled
SCANIUM_ASSISTANT_PROVIDER=mock
SCANIUM_ASSISTANT_API_KEYS=CHANGE_ME_ASSISTANT_KEY

# OpenAI configuration (only if provider=openai)
# OPENAI_API_KEY=sk-your-openai-key
# OPENAI_MODEL=gpt-4o-mini

# Assistant rate limits (conservative for NAS)
ASSIST_RATE_LIMIT_PER_MINUTE=30
ASSIST_DAILY_QUOTA=100

# -----------------------------------------------------------------------------
# OpenTelemetry (for monitoring stack integration)
# -----------------------------------------------------------------------------
# If running monitoring stack, point to Alloy OTLP endpoint
# OTEL_EXPORTER_OTLP_ENDPOINT=http://scanium-alloy:4318

# -----------------------------------------------------------------------------
# Cloudflare Tunnel (Optional - for secure external access)
# -----------------------------------------------------------------------------
# Get token from: Cloudflare Zero Trust > Access > Tunnels
# Leave empty to disable tunnel (LAN-only access)
CLOUDFLARED_TOKEN=
